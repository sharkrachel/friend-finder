<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FriendFinder Survey</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="main-container">
        <h3 class="survey-title">Survey Questions</h3>
        <!-- <h5 class="about-you">About You</h5> -->

        <div class="row">
            <form class="col s12">
                <div class="row">
                    <div class="input-field col s12">
                        <input id="first_name" type="text" class="validate" required="" aria-required="true">
                        <label for="first_name">First Name</label>
                    </div>

                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="photo_url" type="text" class="validate">
                        <label for="photo_url">Photo URL</label>
                    </div>
                </div>
            </form>
        </div>

        <div class="questions input-field col s3 m6">
            <h6>Question 1</h6>
            <p>How much do you love dogs?</p>
            <select class="q1">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (only a little)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (like a lot)</option>
            </select>
        </div>

        <div class="questions input-field col s3 m6">
            <h6>Question 2</h6>
            <p>How likely are you to flake on plans? </p>
            <select class="q2">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (very likely) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (i would never) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 3</h6>
            <p>How quickly do you text back?</p>
            <select class="q3">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (sometimes days later) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (instantly) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 4</h6>
            <p>How much do you like wine?</p>
            <select class="q4">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (hate it) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (love it) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 5</h6>
            <p>Do you enjoy being outdoors?</p>
            <select class="q5">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (hate it) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (love it) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 6</h6>
            <p>How often do you brunch?</p>
            <select class="q6">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (never been) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (every sunday) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 7</h6>
            <p>How spontaneous are you?</p>
            <select class="q7">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (i plan everything) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (i've never made a plan in my life) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 8</h6>
            <p>Do you watch Grey's Anatomy?</p>
            <select class="q8">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (what?) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (i live for thursday night at 9 p.m.) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 9</h6>
            <p>Are you funny?</p>
            <select class="q9">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (no) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (yes) </option>
            </select>
        </div>
        <div class="questions input-field col s3 m6">
            <h6>Question 10</h6>
            <p>Do you hate taking long surveys?</p>
            <select class="q10">
                <option value="" disabled selected>Please select</option>
                <option value="1">1 (no) </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (yes) </option>
            </select>

            <a href="#modal1" class="survey-submit waves-effect waves-light btn-large modal-trigger">Submit</a>
       
        </div>
    </div>


    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="/js/app.js"></script>
    <script>
        $(document).ready(function () {
            $('select').formSelect();
           
    $('.modal').modal();
    $(".survey-submit").on("click", function () {

        var newFriend = {
            name: $("#first_name").val(),
            photo: $("#photo_url").val(),
            scores: [$(".q1").val(),
            $(".q2").val(),
            $(".q3").val(),
            $(".q4").val(),
            $(".q5").val(),
            $(".q6").val(),
            $(".q7").val(),
            $(".q8").val(),
            $(".q9").val(),
            $(".q10").val()
            ]
        }
        $.ajax({
            url: "/api/friends",
            method: "POST",
            data: newFriend
        }).then(function (matchedFriend) {
            console.log(matchedFriend.name)
            if (matchedFriend) {
                $("#name").text(matchedFriend.name);
                $("#photo").attr("src", matchedFriend.photo);

            }

        });

    });


});
     
    </script>
  <!-- Modal Trigger -->
  <!-- <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a> -->

  <!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Your new best friend is...</h4>
      <h5 id="name"></h5>
      <img style="width:300px;height:300px;" id="photo">
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>
</body>

</html>